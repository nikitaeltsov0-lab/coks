<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>2D Minecraft Survival</title>
    <style>
        body { background: #333; color: white; font-family: sans-serif; display: flex; flex-direction: column; align-items: center; margin: 0; overflow: hidden; }
        #game-container { position: relative; border: 4px solid #000; margin-top: 20px; line-height: 0; background: #87CEEB; }
        .row { display: flex; }
        .cell { width: 30px; height: 30px; display: inline-block; box-sizing: border-box; background-size: cover; cursor: pointer; }
        
        /* –¶–≤–µ—Ç–∞ –±–ª–æ–∫–æ–≤ */
        .sky { background-color: #87CEEB; }
        .dirt { background-color: #8B4513; border: 1px solid #5D2E0A; }
        .grass { background-color: #2ecc71; border: 1px solid #27ae60; }
        .wood { background-color: #A0522D; border: 2px solid #5C3317; }
        .leaves { background-color: #228B22; opacity: 0.9; }
        .stone { background-color: #7f8c8d; border: 1px solid #34495e; }
        .coal { background-color: #2c3e50; border: 1px solid #000; }
        .player { background-color: #e74c3c; border-radius: 50%; border: 2px solid #c0392b; position: absolute; width: 30px; height: 30px; transition: 0.1s; }
        .zombie { background-color: #27ae60; border-radius: 5px; border: 2px solid #145a32; position: absolute; width: 30px; height: 30px; }

        #ui { background: #222; padding: 15px; width: 100%; display: flex; justify-content: space-around; }
        .inv-slot { border: 2px solid #555; padding: 5px; min-width: 80px; text-align: center; }
        .craft-btn { background: #f1c40f; border: none; padding: 5px 10px; cursor: pointer; font-weight: bold; }
    </style>
</head>
<body>

<div id="ui">
    <div id="inventory">–ò–Ω–≤–µ–Ω—Ç–∞—Ä—å: –ó–µ–º–ª—è(0), –î–µ—Ä–µ–≤–æ(0), –ö–∞–º–µ–Ω—å(0)</div>
    <div id="crafting">
        –ö—Ä–∞—Ñ—Ç: 
        <button class="craft-btn" onclick="craft('pickaxe')">–ö–∏—Ä–∫–∞ (3 –¥–µ—Ä–µ–≤–∞)</button>
        <button class="craft-btn" onclick="craft('torch')">–§–∞–∫–µ–ª (1 –¥–µ—Ä–µ–≤–æ + 1 —É–≥–æ–ª—å)</button>
    </div>
    <div id="stats">HP: 100 | –î–µ–Ω—å: 1</div>
</div>

<div id="game-container">
    <div id="world"></div>
    <div id="player" class="player"></div>
</div>

<script>
    const WORLD_WIDTH = 30;
    const WORLD_HEIGHT = 15;
    const worldData = [];
    const inventory = { dirt: 0, wood: 0, stone: 0, coal: 0, pickaxe: 0, torch: 0 };
    let playerPos = { x: 5, y: 5 };

    // 1. –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –º–∏—Ä–∞
    function generateWorld() {
        const worldEl = document.getElementById('world');
        for (let y = 0; y < WORLD_HEIGHT; y++) {
            const row = document.createElement('div');
            row.className = 'row';
            worldData[y] = [];
            for (let x = 0; x < WORLD_WIDTH; x++) {
                let type = 'sky';
                
                // –ó–µ–º–ª—è –∏ —Ç—Ä–∞–≤–∞
                if (y > 7) type = 'dirt';
                if (y === 7) type = 'grass';
                
                // –®–∞—Ö—Ç—ã (–∫–∞–º–µ–Ω—å –∏ —É–≥–æ–ª—å)
                if (y > 10) {
                    type = Math.random() > 0.8 ? 'coal' : 'stone';
                }

                // –î–µ—Ä–µ–≤—å—è
                if (y === 6 && Math.random() > 0.85 && x > 1 && x < WORLD_WIDTH-1) {
                    type = 'wood';
                    // –ö—Ä–æ–Ω–∞ –¥–µ—Ä–µ–≤–∞ —Å–æ–∑–¥–∞–µ—Ç—Å—è –≤—Ä—É—á–Ω—É—é –¥–ª—è –ø—Ä–æ—Å—Ç–æ—Ç—ã
                }

                const cell = document.createElement('div');
                cell.className = cell ${type};
                cell.onclick = () => mine(x, y);
                row.appendChild(cell);
                worldData[y][x] = { type, el: cell };
            }
            worldEl.appendChild(row);
        }
    }

    // 2. –õ–æ–≥–∏–∫–∞ –¥–æ–±—ã—á–∏
    function mine(x, y) {
        const block = worldData[y][x];
        const dist = Math.hypot(x - playerPos.x, y - playerPos.y);
    if (dist < 2.5 && block.type !== 'sky') {
            if (block.type === 'stone' && inventory.pickaxe === 0) {
                alert("–ù—É–∂–Ω–∞ –∫–∏—Ä–∫–∞ –¥–ª—è –∫–∞–º–Ω—è!");
                return;
            }
            
            // –î–æ–±–∞–≤–ª—è–µ–º –≤ –∏–Ω–≤–µ–Ω—Ç–∞—Ä—å
            if (inventory.hasOwnProperty(block.type)) {
                inventory[block.type]++;
            } else if (block.type === 'grass') {
                inventory.dirt++;
            }
            
            block.type = 'sky';
            block.el.className = 'cell sky';
            updateUI();
        }
    }

    // 3. –ö—Ä–∞—Ñ—Ç
    function craft(item) {
        if (item === 'pickaxe' && inventory.wood >= 3) {
            inventory.wood -= 3;
            inventory.pickaxe++;
            alert("–í—ã —Å–∫—Ä–∞—Ñ—Ç–∏–ª–∏ –∫–∏—Ä–∫—É!");
        } else if (item === 'torch' && inventory.wood >= 1 && inventory.coal >= 1) {
            inventory.wood -= 1;
            inventory.coal -= 1;
            inventory.torch++;
            alert("–§–∞–∫–µ–ª –≥–æ—Ç–æ–≤!");
        } else {
            alert("–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Ä–µ—Å—É—Ä—Å–æ–≤!");
        }
        updateUI();
    }

    // 4. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
    function updateUI() {
        document.getElementById('inventory').innerHTML = 
            üü´ –ó–µ–º–ª—è: ${inventory.dirt} | 
            ü™µ –î–µ—Ä–µ–≤–æ: ${inventory.wood} | 
            ‚õ∞Ô∏è –ö–∞–º–µ–Ω—å: ${inventory.stone} | 
            üî• –£–≥–æ–ª—å: ${inventory.coal} | 
            ‚õèÔ∏è –ö–∏—Ä–∫–∏: ${inventory.pickaxe}
        ;
    }

    // 5. –î–≤–∏–∂–µ–Ω–∏–µ –∏–≥—Ä–æ–∫–∞
    function movePlayer() {
        const playerEl = document.getElementById('player');
        playerEl.style.left = (playerPos.x * 30) + 'px';
        playerEl.style.top = (playerPos.y * 30) + 'px';
    }

    window.addEventListener('keydown', (e) => {
        let newX = playerPos.x;
        let newY = playerPos.y;
        if (e.key === 'ArrowLeft' || e.key === 'a') newX--;
        if (e.key === 'ArrowRight' || e.key === 'd') newX++;
        if (e.key === 'ArrowUp' || e.key === 'w') newY--;
        if (e.key === 'ArrowDown' || e.key === 's') newY++;

        // –ö–æ–ª–ª–∏–∑–∏—è (–Ω–µ —Ö–æ–¥–∏—Ç—å —Å–∫–≤–æ–∑—å –±–ª–æ–∫–∏)
        if (newX >= 0 && newX < WORLD_WIDTH && newY >= 0 && newY < WORLD_HEIGHT) {
            if (worldData[newY][newX].type === 'sky') {
                playerPos.x = newX;
                playerPos.y = newY;
                movePlayer();
            }
        }
    });

    // 6. –ú–æ–±—ã (–ø—Ä–æ—Å—Ç–æ–π –∑–æ–º–±–∏)
    function spawnZombie() {
        const zombie = document.createElement('div');
        zombie.className = 'zombie';
        document.getElementById('game-container').appendChild(zombie);
        
        let zPos = { x: 25, y: 7 };
        
        setInterval(() => {
            if (zPos.x > playerPos.x) zPos.x--;
            else zPos.x++;
            
            zombie.style.left = (zPos.x * 30) + 'px';
            zombie.style.top = (zPos.y * 30) + 'px';
            
            if (zPos.x === playerPos.x && zPos.y === playerPos.y) {
                statusDiv = document.getElementById('stats').innerHTML = "–í–ê–° –°–™–ï–õ –ó–û–ú–ë–ò! –û–±–Ω–æ–≤–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É.";
            }
        }, 1000);
    }

    generateWorld();
    movePlayer();
    updateUI();
    setTimeout(spawnZombie, 3000); // –ó–æ–º–±–∏ –ø–æ—è–≤–∏—Ç—Å—è —á–µ—Ä–µ–∑ 3 —Å–µ–∫—É–Ω–¥—ã

</script>
</body>
</html>
