Никита, [14.01.2026 13:35]
<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>3D Game with Mouse Look</title>
    <style>
        body { margin: 0; overflow: hidden; background-color: #000; font-family: sans-serif; }
        #ui {
            position: absolute; top: 10px; left: 10px;
            color: white; background: rgba(0,0,0,0.5); padding: 10px;
            pointer-events: none; /* Чтобы не мешало кликать */
        }
        #center {
            position: absolute; top: 50%; left: 50%;
            transform: translate(-50%, -50%);
            color: white; font-weight: bold; font-size: 20px;
            text-align: center;
        }
    </style>
</head>
<body>
    <div id="ui">WASD - Ходить, Пробел - Прыжок<br>Мышь - Поворот камеры</div>
    <div id="center" id="msg">Нажми на экран, чтобы начать</div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script>
        const scene = new THREE.Scene();
        scene.background = new THREE.Color(0x87CEEB);

        const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
        const renderer = new THREE.WebGLRenderer({ antialias: true });
        renderer.setSize(window.innerWidth, window.innerHeight);
        document.body.appendChild(renderer.domElement);

        // Свет
        const light = new THREE.DirectionalLight(0xffffff, 1);
        light.position.set(5, 10, 5);
        scene.add(light);
        scene.add(new THREE.AmbientLight(0x404040));

        // Пол
        const floor = new THREE.Mesh(
            new THREE.PlaneGeometry(50, 50),
            new THREE.MeshStandardMaterial({ color: 0x444444 })
        );
        floor.rotation.x = -Math.PI / 2;
        scene.add(floor);

        // Игрок
        const player = new THREE.Mesh(
            new THREE.BoxGeometry(1, 1, 1),
            new THREE.MeshStandardMaterial({ color: 0xFF0000 })
        );
        player.position.y = 0.5;
        scene.add(player);

        // --- УПРАВЛЕНИЕ МЫШЬЮ ---
        let yaw = 0;   // Поворот влево-вправо
        let pitch = 0; // Поворот вверх-вниз
        const mouseSensitivity = 0.002;

        document.body.addEventListener('click', () => {
            document.body.requestPointerLock();
            document.getElementById('center').style.display = 'none';
        });

        document.addEventListener('mousemove', (e) => {
            if (document.pointerLockElement === document.body) {
                yaw -= e.movementX * mouseSensitivity;
                pitch -= e.movementY * mouseSensitivity;
                // Ограничиваем наклон камеры, чтобы не перевернуться
                pitch = Math.max(-Math.PI/3, Math.min(Math.PI/4, pitch));
            }
        });

        const keys = {};
        let velocityY = 0;
        let isGrounded = true;

        window.addEventListener('keydown', (e) => keys[e.code] = true);
        window.addEventListener('keyup', (e) => keys[e.code] = false);

        function animate() {
            requestAnimationFrame(animate);

            // Направление движения относительно поворота камеры
            const speed = 0.1;
            if (keys['KeyW']) {
                player.position.x -= Math.sin(yaw) * speed;
                player.position.z -= Math.cos(yaw) * speed;
            }
            if (keys['KeyS']) {
                player.position.x += Math.sin(yaw) * speed;
                player.position.z += Math.cos(yaw) * speed;
            }
            if (keys['KeyA']) {
                player.position.x -= Math.cos(yaw) * speed;
                player.position.z += Math.sin(yaw) * speed;
            }
            if (keys['KeyD']) {
                player.position.x += Math.cos(yaw) * speed;
                player.position.z -= Math.sin(yaw) * speed;
            }

            // Прыжок
            if (keys['Space'] && isGrounded) {
                velocityY = 0.2;
                isGrounded = false;
            }

            velocityY -= 0.01; 
            player.position.y += velocityY;

Никита, [14.01.2026 13:35]
if (player.position.y <= 0.5) {
                player.position.y = 0.5;
                velocityY = 0;
                isGrounded = true;
            }

            // --- ОБНОВЛЕНИЕ КАМЕРЫ ---
            const dist = 8; // Дистанция от игрока
            camera.position.x = player.position.x + Math.sin(yaw) * Math.cos(pitch) * dist;
            camera.position.y = player.position.y + Math.sin(pitch) * dist + 2; // +2 для высоты
            camera.position.z = player.position.z + Math.cos(yaw) * Math.cos(pitch) * dist;
            
            camera.lookAt(player.position);

            renderer.render(scene, camera);
        }

        animate();

        window.addEventListener('resize', () => {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
        });
    </script>
</body>
</html>
