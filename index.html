–ù–∏–∫–∏—Ç–∞, [13.01.2026 10:15]
<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Knife Hit - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω–∞—è —Ñ–∏–∑–∏–∫–∞</title>
    <style>
        body {
            margin: 0; padding: 0; background-color: #1a1a1a;
            display: flex; justify-content: center; align-items: center;
            height: 100vh; overflow: hidden; font-family: 'Arial', sans-serif;
            touch-action: none;
        }
        #game-container { position: relative; }
        canvas { background: #2c3e50; display: block; cursor: pointer; border-radius: 10px; }
        #ui-layer {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            pointer-events: none; display: flex; flex-direction: column;
            justify-content: space-between; padding: 20px; box-sizing: border-box; color: white;
        }
        .level-info { font-size: 28px; font-weight: bold; }
        .knives-left { display: flex; flex-direction: column-reverse; gap: 8px; }
        .knife-icon { font-size: 24px; opacity: 0.2; }
        .knife-icon.active { opacity: 1; filter: drop-shadow(0 0 5px gold); }
        #game-over {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.9); display: none; flex-direction: column;
            justify-content: center; align-items: center; color: white; z-index: 10;
        }
        button {
            margin-top: 20px; padding: 15px 40px; background: #f1c40f;
            border: none; color: #2c3e50; font-size: 20px; font-weight: bold;
            cursor: pointer; border-radius: 50px; pointer-events: auto;
        }
    </style>
</head>
<body>

<div id="game-container">
    <canvas id="gameCanvas"></canvas>
    <div id="ui-layer">
        <div class="level-info">LVL: <span id="levelNum">1</span></div>
        <div class="knives-left" id="knivesCounter"></div>
    </div>
    <div id="game-over">
        <h1>GAME OVER</h1>
        <p>Score: <span id="finalScore">0</span></p>
        <button onclick="initGame()">RESTART</button>
    </div>
</div>

<script>
    const canvas = document.getElementById('gameCanvas');
    const ctx = canvas.getContext('2d');
    canvas.width = 450;
    canvas.height = 700;

    let gameState = {
        isRunning: false,
        level: 1,
        score: 0,
        knivesRemaining: 0
    };

    const target = {
        x: canvas.width / 2,
        y: 220,
        radius: 90,
        rotation: 0,
        speed: 0.03,
        stuckKnives: [], // –•—Ä–∞–Ω–∏–º —É–≥–ª—ã
        shake: 0
    };

    const knife = {
        startX: canvas.width / 2,
        startY: canvas.height - 120,
        x: canvas.width / 2,
        y: canvas.height - 120,
        w: 12,
        h: 80,
        speed: 35,
        isFlying: false
    };

    function initGame() {
        gameState.level = 1;
        gameState.score = 0;
        setupLevel(1);
        gameState.isRunning = true;
        document.getElementById('game-over').style.display = 'none';
        requestAnimationFrame(gameLoop);
    }

    function setupLevel(lvl) {
        gameState.knivesRemaining = 5 + lvl;
        target.stuckKnives = [];
        let baseSpeed = 0.02 + (lvl * 0.005);
        target.speed = (lvl % 2 === 0) ? -baseSpeed : baseSpeed;
        updateUI();
    }

    function update() {
        if (!gameState.isRunning) return;

        target.rotation += target.speed;
        if (target.shake > 0) target.shake -= 0.5;

        if (knife.isFlying) {
            knife.y -= knife.speed;
            // –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–æ–ª–∫–Ω–æ–≤–µ–Ω–∏—è —Å –Ω–∏–∂–Ω–µ–π —Ç–æ—á–∫–æ–π –±—Ä–µ–≤–Ω–∞
            if (knife.y <= target.y + target.radius) {
                processHit();
            }
        }
    }

    function processHit() {
        knife.isFlying = false;

–ù–∏–∫–∏—Ç–∞, [13.01.2026 10:15]
// –í–ê–ñ–ù–û: –í—ã—á–∏—Å–ª—è–µ–º —É–≥–æ–ª –≤—Ö–æ–¥–∞. 
        // –ù–æ–∂ –ª–µ—Ç–∏—Ç —Å–Ω–∏–∑—É (—ç—Ç–æ 90 –≥—Ä–∞–¥—É—Å–æ–≤ –∏–ª–∏ Math.PI/2 –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ —Ü–µ–Ω—Ç—Ä–∞).
        // –ß—Ç–æ–±—ã –∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞—Ç—å –µ–≥–æ –Ω–∞ –∫—Ä—É—Ç—è—â–µ–º—Å—è –±—Ä–µ–≤–Ω–µ, –≤—ã—á–∏—Ç–∞–µ–º —Ç–µ–∫—É—â–∏–π –ø–æ–≤–æ—Ä–æ—Ç –±—Ä–µ–≤–Ω–∞.
        let hitAngle = (Math.PI / 2) - target.rotation;

        // –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ —Å—Ç–æ–ª–∫–Ω–æ–≤–µ–Ω–∏–µ —Å –¥—Ä—É–≥–∏–º–∏ –Ω–æ–∂–∞–º–∏
        const hitZone = 0.22; 
        for (let angle of target.stuckKnives) {
            let diff = Math.abs(normalize(angle) - normalize(hitAngle));
            if (diff < hitZone || diff > (Math.PI * 2 - hitZone)) {
                gameOver();
                return;
            }
        }

        // –£—Å–ø–µ—à–Ω—ã–π —É–¥–∞—Ä
        target.stuckKnives.push(hitAngle);
        target.shake = 8;
        gameState.score++;
        gameState.knivesRemaining--;
        updateUI();

        if (gameState.knivesRemaining <= 0) {
            setTimeout(() => {
                gameState.level++;
                setupLevel(gameState.level);
            }, 100);
        }
        
        knife.y = knife.startY;
    }

    function draw() {
        ctx.clearRect(0, 0, canvas.width, canvas.height);

        // –†–∏—Å—É–µ–º –±—Ä–µ–≤–Ω–æ –∏ –Ω–æ–∂–∏ –≤ –Ω–µ–º
        ctx.save();
        ctx.translate(target.x, target.y + (target.shake ? Math.sin(Date.now()) * target.shake : 0));
        
        // –í—Ä–∞—â–∞–µ–º –í–°–Å –±—Ä–µ–≤–Ω–æ –≤–º–µ—Å—Ç–µ —Å –≤–æ–Ω–∑–µ–Ω–Ω—ã–º–∏ –Ω–æ–∂–∞–º–∏
        ctx.save();
        ctx.rotate(target.rotation);

        // –†–∏—Å—É–µ–º —Å–∞–º–æ –¥–µ—Ä–µ–≤–æ
        ctx.beginPath();
        ctx.arc(0, 0, target.radius, 0, Math.PI * 2);
        ctx.fillStyle = '#8b4513';
        ctx.fill();
        ctx.strokeStyle = '#5d2e0a';
        ctx.lineWidth = 8;
        ctx.stroke();

        // –†–∏—Å—É–µ–º –≤–æ–Ω–∑–µ–Ω–Ω—ã–µ –Ω–æ–∂–∏
        target.stuckKnives.forEach(angle => {
            ctx.save();
            ctx.rotate(angle); // –ü–æ–≤–æ—Ä–∞—á–∏–≤–∞–µ–º –∫ —Ç–æ—á–∫–µ —É–¥–∞—Ä–∞
            ctx.translate(0, target.radius); // –°–¥–≤–∏–≥–∞–µ–º –∫ –∫—Ä–∞—é
            drawKnifeShape(true); // –†–∏—Å—É–µ–º –≤–æ–Ω–∑–µ–Ω–Ω—ã–º (–ª–µ–∑–≤–∏–µ–º –≤–Ω—É—Ç—Ä—å)
            ctx.restore();
        });
        ctx.restore();
        ctx.restore();

        // –†–∏—Å—É–µ–º –ª–µ—Ç—è—â–∏–π –∏–ª–∏ –≥–æ—Ç–æ–≤—ã–π –Ω–æ–∂ (–≤—Å–µ–≥–¥–∞ —Å–Ω–∏–∑—É –ø–æ —Ü–µ–Ω—Ç—Ä—É)
        if (!knife.isFlying || knife.y > target.y) {
            ctx.save();
            ctx.translate(knife.x, knife.y);
            drawKnifeShape(false); // –†–∏—Å—É–µ–º –ª–µ—Ç—è—â–∏–º (–ª–µ–∑–≤–∏–µ–º –≤–≤–µ—Ä—Ö)
            ctx.restore();
        }
    }

    // –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –æ—Ç—Ä–∏—Å–æ–≤–∫–∏ –Ω–æ–∂–∞
    function drawKnifeShape(isStuck) {
        ctx.save();
        if (!isStuck) {
            // –ï—Å–ª–∏ –Ω–æ–∂ –ª–µ—Ç–∏—Ç, —Ä–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–µ–º –µ–≥–æ –æ—Å—Ç—Ä–∏–µ–º –≤–≤–µ—Ä—Ö
            ctx.rotate(Math.PI);
        }
        // –¢–µ–ø–µ—Ä—å –≤ –æ–±–µ–∏—Ö —Å–∏—Ç—É–∞—Ü–∏—è—Ö —Ä–∏—Å—É–µ–º –Ω–æ–∂ –æ–¥–∏–Ω–∞–∫–æ–≤–æ:
        // –û—Å—Ç—Ä–∏–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–æ –í–ù–ò–ó –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ –ª–æ–∫–∞–ª—å–Ω—ã—Ö –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç
        
        // –õ–µ–∑–≤–∏–µ
        ctx.fillStyle = '#ecf0f1';
        ctx.beginPath();
        ctx.moveTo(-6, 0);
        ctx.lineTo(6, 0);
        ctx.lineTo(0, 50); // –û—Å—Ç—Ä–∏–µ
        ctx.fill();

        // –†—É–∫–æ—è—Ç–∫–∞
        ctx.fillStyle = '#d35400';
        ctx.fillRect(-7, -25, 14, 25);
        ctx.restore();
    }

    function gameLoop() {
        update();
        draw();
        if (gameState.isRunning) requestAnimationFrame(gameLoop);
    }

    function gameOver() {
        gameState.isRunning = false;
        document.getElementById('finalScore').textContent = gameState.score;
        document.getElementById('game-over').style.display = 'flex';
    }

    function updateUI() {
        document.getElementById('levelNum').textContent = gameState.level;
        const container = document.getElementById('knivesCounter');
        container.innerHTML = '';
        for (let i = 0; i < gameState.knivesRemaining; i++) {
            const div = document.createElement('div');
            div.className = 'knife-icon active';
            div.innerHTML = 'üó°Ô∏è';
            container.appendChild(div);
        }
    }

    function normalize(a) {
        a = a % (Math.PI * 2);
        if (a < 0) a += Math.PI * 2;
        return a;
    }

–ù–∏–∫–∏—Ç–∞, [13.01.2026 10:15]
const startThrow = (e) => {
        if (e.cancelable) e.preventDefault();
        if (!knife.isFlying && gameState.isRunning) {
            knife.isFlying = true;
        }
    };

    canvas.addEventListener('mousedown', startThrow);
    canvas.addEventListener('touchstart', startThrow, {passive: false});

    initGame();
</script>
</body>
</html>
